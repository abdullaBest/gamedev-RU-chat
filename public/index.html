<!DOCTYPE html><html>	<head>		<title>чат</title>		<meta charset="utf-8">        <style type="text/css">            #chat{                width: 100%;                height: 400px;            }            #txt{                width: 80%;            }            .msg_nick{                color:green;            }            .msg_txt{                font-size:16px;                color:black;            }        </style>        <script>            "use strict"            const url = 'localhost';            let socket = null;            let nick = '';            function login(){                let d = document.getElementById('login');                nick = document.getElementById('nick').value;                if (nick.length>=3){                    d.style.display = 'none';                    socket = new WebSocket('ws://'+url+':3000');                    socket.onopen    = on_open;                    socket.onmessage = on_message;                    socket.onclose   = on_close;                }            }            function on_open(){                let d = document.getElementById('msg');                d.style.display='block';                let a = [0,nick,''];                socket.send(JSON.stringify(a));            }            function on_close(){                alert('связь прервана');            }                        function on_message(m){                let a = JSON.parse(m.data);                let t = parseInt(a[0]);                let d = document.getElementById('chat');               /* if (t===0){                    let b = a[1];                    for (let i=0;i<b.length;i++){                        let nick = b[1];                        let msg  = b[2];                        let dd = document.createElement('div');                        let p = document.createElement('span');                        p.className ='msg_nick';                        p.innerText = nick+':';                        dd.appendChild(p);                        p = document.createElement('span');                        p.className ='msg_txt';                        p.innerText = msg;                        dd.appendChild(p);                        d.appendChild(dd);                    }                }                */                if (t===1){                    let nick = a[1];                     let msg  = a[2];                    let dd = document.createElement('div');                    let p = document.createElement('span');                    p.className ='msg_nick';                    p.innerText = nick+':';                    dd.appendChild(p);                    p = document.createElement('span');                    p.className ='msg_txt';                    p.innerText = msg;                    dd.appendChild(p);                    d.appendChild(dd);                }else{                    let b = a[1];                    console.log(b);                    for (let i=0;i<b.length;i++){                        let bb = JSON.parse(b[i]);                        let nick = bb[1];                        let msg  = bb[2];                        let dd = document.createElement('div');                        let p = document.createElement('span');                        p.className ='msg_nick';                        p.innerText = nick+':';                        dd.appendChild(p);                        p = document.createElement('span');                        p.className ='msg_txt';                        p.innerText = msg;                        dd.appendChild(p);                        d.appendChild(dd);                    }                }            }                        function send(){                let s = document.getElementById('txt').value;                let a = [1,nick,s];                socket.send(JSON.stringify(a));            }        </script>	</head>    <body style="padding:0;margin:0;">        <div id="chat"></div>                        <div id="login">ник:<input id="nick" type="text"><button onclick="login();">вход</button></div>                        <div id="msg" style="display:none;"><input id="txt" type="text"><button onclick="send();">отправить</button></div>                    </body></html>